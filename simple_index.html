<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Input Runner (Simple Videos)</title>
  <style>
    body { background:#111; color:#afa; text-align:center; font-family:Arial,sans-serif; }
    .player-modal { position:fixed; top:0; left:0; width:100%; height:100%; background:#111f; display:flex; flex-direction:column; align-items:center; justify-content:center; z-index:10;}
    .player-modal video { background:#000; border:3px solid #9fa; border-radius:8px; }
    .input-list { display:flex; flex-wrap:wrap; justify-content:center; gap:16px; margin-top:24px;}
    .input-btn { background:#222; color:#afa; border:2px solid #444; border-radius:7px; padding:18px 24px; margin:6px; font-size:1.2em; cursor:pointer;}
    .input-btn:hover, .input-btn:focus { border-color:#aeffb9; background:#262; color:#fff; }
    .label { margin-bottom:6px; }
    .close-hint { color:#ede; margin:12px 0 0 0; }
  </style>
</head>
<body>
  <h2 style="margin-top:18px;">Input Runner (Simple Player)</h2>
  <div class="input-list" id="inputList">
    <button class="input-btn" data-src="ext://hdmi:1">HDMI 1</button>
    <button class="input-btn" data-src="ext://hdmi:2">HDMI 2</button>
    <button class="input-btn" data-src="ext://hdmi:3">HDMI 3</button>
    <button class="input-btn" data-src="ext://hdmi:4">HDMI 4</button>
    <button class="input-btn" data-src="ext://comp:1">Component 1</button>
    <button class="input-btn" data-src="ext://av:1">AV 1</button>
    <button class="input-btn" data-src="ext://av:2">AV 2</button>
  </div>

  <div id="playerModal" class="player-modal" style="display:none">
    <div class="label" id="playerLabel"></div>
    <video id="playerVideo" autoplay controls style="width:50vw;height:50vh;">
      <source id="playerSource" type="service/webos-external">
    </video>
    <div class="close-hint">
      (Backspace/BACK/Escape = Exit Player)<br>
      (Page Up/Down = Change Size)
    </div>
  </div>
  <script>
    var inputList = document.getElementById('inputList');
    var playerModal = document.getElementById('playerModal');
    var playerVideo = document.getElementById('playerVideo');
    var playerSource = document.getElementById('playerSource');
    var playerLabel = document.getElementById('playerLabel');
    var currentInputName = "";
    var playerSizes = [
      {w:"32vw", h:"29vh"}, // Smallest
      {w:"50vw", h:"50vh"}, // Default (1)
      {w:"80vw", h:"80vh"}, // Largest
    ];
    var playerSizeIdx = 1;

    inputList.onclick = function(e) {
      var btn = e.target.closest('.input-btn');
      if(!btn) return;
      var src = btn.getAttribute('data-src');
      var name = btn.textContent;
      playerSource.src = src;
      playerVideo.load();
      playerLabel.textContent = name;
      playerModal.style.display = "";
      playerSizeIdx = 1;
      setPlayerSize(playerSizeIdx);
      currentInputName = name;
      playerVideo.focus();
    };

    function setPlayerSize(idx) {
      idx = Math.max(0, Math.min(2, idx));
      playerSizeIdx = idx;
      var sz = playerSizes[idx];
      playerVideo.style.width = sz.w;
      playerVideo.style.height = sz.h;
    }

    // Close modal helper
    function exitPlayer() {
      playerModal.style.display = "none";
      playerVideo.pause();
      currentInputName = "";
    }

    // Key handling for player modal
    document.addEventListener('keydown', function(e) {
      if (playerModal.style.display !== "none") {
        var k = e.key;
        if (
          k === "Backspace" ||
          k === "Escape" ||
          k === "VK_BACK" ||
          k === "BACK" ||
          e.keyCode === 461 || // LG webOS "BACK"
          e.keyCode === 412    // Some TV remotes
        ) {
          exitPlayer();
          e.preventDefault();
          return;
        }
        // Page Up to increase size
        if (k === "PageUp" || e.keyCode === 33) {
          setPlayerSize(Math.min(playerSizeIdx + 1, 2));
          e.preventDefault();
        }
        // Page Down to decrease size
        if (k === "PageDown" || e.keyCode === 34) {
          setPlayerSize(Math.max(playerSizeIdx - 1, 0));
          e.preventDefault();
        }
      }
    });

    // Optional: click outside video closes
    playerModal.addEventListener('click', function(e) {
      if (e.target === playerModal) exitPlayer();
    });

  </script>
</body>
</html>